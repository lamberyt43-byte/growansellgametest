<!DOCTYPE html>
<html>

<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>üåæ –í—ã—Ä–∞—Å—Ç–∏ –∏ –ø—Ä–æ–¥–∞–π!</title>

  <style>
    /* –§–æ–Ω –∏–≥—Ä—ã (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ä–∞–∑–º—ã—Ç—ã–π) */
#game-container {
    filter: blur(8px);
    transition: filter 0.5s ease;
}

/* –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω */
#start-screen {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 1000;
}

.logo-container {
    text-align: center;
    color: white;
}

.logo {
    max-width: 400px;
}

.press-text {
    font-size: 24px;
    margin-top: 20px;
    animation: blink 3s infinite;
}

/* –ú–∏–≥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
@keyframes blink {
    0%, 50%, 100% { opacity: 1; }
    25%, 75% { opacity: 0.3; }
}

body {
  font-family: 'Segoe UI', sans-serif;
  background: #f3f0e5;
  color: #333;
  text-align: center;
  padding: 20px;
}
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.75);
  display: none; /* –í–ê–ñ–ù–û */
  justify-content: center;
  align-items: center;
  z-index: 99999;
}

.modal-content {
  background: #111;
  color: white;
  padding: 20px;
  border-radius: 15px;
  width: 90%;
  max-width: 320px;
  text-align: center;
}

/* ===== üî• OIL EVENT BANNER üî• ===== */
#oilBanner {
    position: relative;
    background: linear-gradient(135deg, #2a0f00, #5a2a00, #a05a00, #ffb341);
    background-size: 300% 300%;
    animation: oilFlow 6s infinite;
    padding: 14px;
    border-radius: 14px;
    width: 85%;
    margin: 12px auto;
    color: #ffe9c4;
    text-shadow: 0 0 8px #ff8800;
    box-shadow: 0 0 25px rgba(255,140,0,0.7);
    overflow: hidden;
    border: 2px solid rgba(255,180,80,0.6);
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ–ª–∏–≤–∞–Ω–∏—è –Ω–µ—Ñ—Ç–∏ */
@keyframes oilFlow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* –ë–ª–∏–∫–∏ –ø–æ–≤–µ—Ä—Ö –±–∞–Ω–Ω–µ—Ä–∞ */
.oil-shine {
    position: absolute;
    top: 0;
    left: -200px;
    width: 180px;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    filter: blur(4px);
    transform: rotate(15deg);
    animation: shineMove 3s infinite;
}

@keyframes shineMove {
    0% { left: -200px; }
    100% { left: 110%; }
}

/* –≠—Ñ—Ñ–µ–∫—Ç –æ–≥–Ω—è –ø–æ –∫—Ä–∞—è–º */
.oil-fire {
    position: absolute;
    bottom: 0;
    left: 0;
    height: 6px;
    width: 100%;
    background: linear-gradient(90deg, #ff3300, #ffcc00, #ff3300);
    filter: blur(4px);
    animation: firePulse 1.7s infinite;
}

@keyframes firePulse {
    0%, 100% { opacity: 0.55; }
    50% { opacity: 1; }
}

/* –¢–µ–∫—Å—Ç */
.oil-title {
    font-size: 18px;
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
    animation: titleGlow 2s infinite;
}

@keyframes titleGlow {
    0%, 100% { text-shadow: 0 0 10px #ff8800; }
    50% { text-shadow: 0 0 20px #ffcc66; }
}

.oil-currency {
    font-size: 16px;
}

/* === üõ¢ PREMIUM OIL SHOP === */
#oilShop {
  position: fixed;
  top: 85px;
  left: 50%;
  transform: translateX(-50%);
  width: 330px;
  background: linear-gradient(135deg, #2d1300, #5a2100, #a04d00);
  padding: 20px;
  border-radius: 15px;
  box-shadow: 0 0 25px rgba(255,120,0,0.9);
  z-index: 1000;
  color: #ffe6c7;
  border: 2px solid rgba(255,160,60,0.7);
  animation: oilShopIn 0.3s ease-out;
}

@keyframes oilShopIn {
  from { transform: translate(-50%, -20px); opacity: 0; }
  to { transform: translate(-50%, 0); opacity: 1; }
}

#oilButton {
  margin-top: 10px;
  background: linear-gradient(90deg, #a04000, #ff8c00);
  color: #fff4d6;
  padding: 12px 20px;
  border-radius: 12px;
  font-weight: bold;
  text-shadow: 0 0 6px #ffbe59;
  box-shadow: 0 0 10px rgba(255,120,0,0.9);
  animation: pulseOil 2s infinite;
}

@keyframes pulseOil {
  0% { box-shadow: 0 0 12px rgba(255,120,0,0.5); }
  50% { box-shadow: 0 0 25px rgba(255,180,0,1); }
  100% { box-shadow: 0 0 12px rgba(255,120,0,0.5); }
}

.oil-title-shop {
  font-size: 22px;
  font-weight: bold;
  margin-bottom: 15px;
  text-shadow: 0 0 10px #ff8c00;
}

.oil-pack-btn {
  width: 95%;
  margin: 8px 0;
  padding: 12px;
  border-radius: 12px;
  background: linear-gradient(90deg, #7a3100, #ff9b00);
  color: white;
  font-size: 16px;
  font-weight: bold;
  box-shadow: 0 0 10px rgba(255,130,0,0.6);
  cursor: pointer;
  transition: 0.2s;
}

.oil-pack-btn:hover {
  transform: scale(1.05);
}

.oil-close {
  background: #440000;
  color: white;
  padding: 10px 20px;
  border-radius: 12px;
}

.oil-currency {
    font-size: 16px;
}

.tg-btn {
  display: inline-block;
  padding: 10px 20px;
  background: #0088cc;
  color: white;
  font-weight: bold;
  border-radius: 10px;
  text-decoration: none;
  transition: 0.3s;
}
.tg-btn:hover {
  background: #006699;
}





@keyframes shake {
  0% { transform: translate(0, 0); }
  25% { transform: translate(2px, -2px); }
  50% { transform: translate(-2px, 2px); }
  75% { transform: translate(2px, 2px); }
  100% { transform: translate(0, 0); }
}

.shake {
  animation: shake 0.1s infinite;
}












#plantShop {
  position: fixed;
  top: 70px;
  left: 50%;
  transform: translateX(-50%);
  width: 90%;
  max-width: 400px;
  max-height: 70vh;
  background:#fff;
  border-radius: 15px;
  padding: 20px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.2);
  overflow-y: auto;
  z-index: 999;
}

#plantShop h3 {
  margin-top: 0;
}

.shop-list {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}

.shop-list button {
  width: 110px;
  margin: 6px;
  font-size: 14px;
}

.hidden {
  display: none;
}


#harvestButton {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: #ffb74d;
  color: #333;
  padding: 12px 24px;
  font-size: 16px;
  border: none;
  border-radius: 12px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  cursor: pointer;
  z-index: 1000;
  transition: background 0.3s;
}

#harvestButton:hover {
  background-color: #ffa000;
}


#moneyBar {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background-color: #c5e1a5;
  color:  #333;
  font-weight: bold;
  padding: 10px;
  font-size: 18px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  z-index: 1000;
}


#game {
  max-width: 500px;
  margin: auto;
  background: #fff8f0;
  border-radius: 15px;
  padding: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

button {
  margin: 5px;
  padding: 10px;
  border: none;
  background: #8bc34a;
  color: white;
  font-weight: bold;
  border-radius: 10px;
  cursor: pointer;
  transition: 0.3s;
}

button:hover {
  background:  #689f38;
}

#garden {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}

.plot {
  width: 80px;
  height: 80px;
  margin: 5px;
  background:#c8e6c9;
  border: 2px dashed #558b2f;
  border-radius: 10px;
  position: relative;
  font-size: 30px;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
}

.plot.ready {
  background:#fff59d;
}

.tooltip {
  font-size: 10px;
  position: absolute;
  bottom: 0;
  width: 100%;
  background: rgba(255,255,255,0.7);
  border-radius: 0 0 10px 10px;
}

@keyframes growPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.15); }
  100% { transform: scale(1); }
}

.plot.growing {
  animation: growPulse 1.5s infinite;
}





  </style>

  
</head>
<body>
  <link rel="stylesheet" href="style.css" />

  <div id="game">
    <h1>üåø –í—ã—Ä–∞—Å—Ç–∏ –∏ –ø—Ä–æ–¥–∞–π</h1>
    <div id="moneyBar">
      <button onclick="openDonate()">‚ûï</button>

  üí∞ –®–∞–∫–∏–ª–∏: <span id="money">0</span>
</div>

<!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
<div id="start-screen">
    <div class="logo-container">
        <img src="https://i.postimg.cc/85gnc0Zs/Chat-GPT-Image-20-dek-2025-g-18-34-39.png" alt="logo" class="logo">
        <p class="press-text">–ù–∞–∂–º–∏—Ç–µ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</p>
    </div>
</div>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
<div id="game-container">
    <!-- –ó–¥–µ—Å—å —Ç–≤–æ–π –∏–≥—Ä–æ–≤–æ–π –∫–æ–¥ -->
</div>
<div id="donateModal" class="modal">
  <div class="modal-content">

    <h3>üíé –û—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–∫—É–ø–∫—É</h3>

    <p style="font-size:13px;opacity:0.8">
      –ü–æ–∫—É–ø–∫–∞ —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞.<br>
      ‚ö†Ô∏è –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å–≤–æ–π ID
    </p>

    <p><b>ID:</b> <span id="donatePlayerId"></span></p>

    <button onclick="goToBot()">ü§ñ –ù–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É</button>
    <br><br>
    <button onclick="closeDonate()">‚ùå –ó–∞–∫—Ä—ã—Ç—å</button>

  </div>
</div>

<div id="oilBanner">
  <div class="oil-shine"></div>
  <div class="oil-fire"></div>

  <span class="oil-title">
    üõ¢ GROW AND SELL √ó OIL TYCOON EVENT!
  </span>

  <div class="oil-currency">
    ‚õΩ –û–π–ª-–ö–æ–∏–Ω—ã: <span id="oilCoins">0</span>
  </div>
</div>


<div id="oilShop" class="hidden">
  <h3 class="oil-title-shop">üõ¢ OIL SHOP</h3>

  <button class="oil-pack-btn" onclick="buySmallOilPack()">
    üü§ Small Oil Pack ‚Äî 150 ‚õΩ
  </button>

  <button class="oil-pack-btn" onclick="buyBigOilPack()">
    üî• Standard Oil Pack ‚Äî 600 ‚õΩ
  </button>

  <br><br>
  <button class="oil-close" onclick="toggleOilShop()">‚ùå –ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<button id="oilButton" onclick="toggleOilShop()">üõ¢ Oil Shop</button>





<audio id="backgroundMusic" loop>
  <source src="https://dl.dropboxusercontent.com/s/bjxm9kwaciies3onzh0ut/Grow-A-Garden-Classic-Easter-Theme-Reupload-1.mp3
" type="audio/">
  –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
</audio>

<div id="statsTab" class="tab" style="display:none;">
  <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
  <p>üå± –ü–æ—Å–∞–∂–µ–Ω–æ: <span id="statsPlanted">0</span></p>
  <p>üåæ –°–æ–±—Ä–∞–Ω–æ: <span id="statsHarvested">0</span></p>
  <p>üí∞ –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: <span id="statsEarned">0</span></p>
  <button onclick="closeTab('statsTab')">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>


    <div id="upgradeShop">
      <h3>üîß –£–ª—É—á—à–µ–Ω–∏—è</h3>
      <button onclick="buySlot()">–î–æ–±–∞–≤–∏—Ç—å –≥—Ä—è–¥–∫—É (15üí∞) ‚Äî <span id="slotCount"></span></button>
      <button onclick="buyWatering()">–ü–æ–ª–∏–≤–∞–ª–∫–∞ üåßÔ∏è (10üí∞)</button>
    </div>

    <button onclick="toggleShop()">üõí –û—Ç–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω</button>

<div id="plantShop" class="hidden">
  <h3>üå± –ú–∞–≥–∞–∑–∏–Ω —Ä–∞—Å—Ç–µ–Ω–∏–π <button onclick="toggleShop()">‚ùå</button></h3>
  <div id="seedButtons" class="shop-list"></div>
</div>




<div id="shopTab" class="tab" style="display:none;">‚Ä¶</div>
<div id="inventoryTab" class="tab" style="display:none;">‚Ä¶</div>

<div id="skinsTab" class="tab" style="display:none;">
  <h2>–í—ã–±–æ—Ä —Å–∫–∏–Ω–∞ –≥—Ä—è–¥–∫–∏</h2>
  <button onclick="setSkin('default')">–û–±—ã—á–Ω—ã–π</button>
  <button onclick="setSkin('night')">üåô –ù–æ—á–Ω–æ–π</button>
  <br><br>
  <button onclick="closeSkinsTab()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

    <h3>üå± –ì—Ä—è–¥–∫–∏</h3>
    <div id="garden"></div>
  </div>

  <div id="rouletteBox">
  <h3>üé∞ –†—É–ª–µ—Ç–∫–∞</h3>
  <div id="rouletteText">–ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ—é —É–¥–∞—á—É!</div>
  <button onclick="spinRoulette()">üé≤ –ö—Ä—É—Ç–∏—Ç—å (5 000üí∞)</button>
</div>

<div id="redeemSection">
  <h3>üéÅ –ö–æ–¥—ã</h3>
  <input type="text" id="redeemInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥">
  <button onclick="redeemCode()">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
  <p id="redeemMessage"></p>
</div>


<button onclick="tryRebirth()">üîÑ –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</button>


  <a href="https://t.me/+YaDJr4kBFOUyYjEy" target="_blank" class="tg-btn">–ù–∞—à Telegram üì≤</a>

</div>

  <script src="game.js"></script>

  <button id="harvestButton" onclick="harvestAll()">–°–æ–±—Ä–∞—Ç—å –≤—Å—ë üåæ</button>

<style>
#chatBtn {
  position: fixed;
  right: 10px;
  bottom: 80px;
  width: 60px;
  height: 60px;
  background:#00c8ff;
  color:white;
  border:none;
  border-radius:12px;
  font-size:22px;
  cursor:pointer;
  z-index:9999;
}

#chatBox {
  position: fixed;
  right: 10px;
  bottom: 150px;
  width: 320px;
  height: 430px;
  background:#0b1e2d;
  border: 2px solid #0ff;
  border-radius:12px;
  display:none;
  flex-direction:column;
  z-index:9999;
}

#chatMessages {
  flex:1;
  overflow-y:auto;
  padding:10px;
}

.msg {
  padding:6px 10px;
  margin-bottom:6px;
  border-radius:8px;
  color:white;
  font-size:14px;
  word-break:break-word;
}

.me { background:#004cff; }
.other { background:#009dff; }

.systemMsg {
  background:#ff005d;
  font-weight:bold;
}

#chatInput {
  width:100%;
  border:none;
  padding:10px;
  outline:none;
}

#sendBtn {
  width:100%;
  padding:10px;
  background:#00c8ff;
  border:none;
  color:black;
  font-weight:bold;
  cursor:pointer;
}

#nameBox {
  position: fixed;
  top: 50%;
  left:50%;
  transform: translate(-50%,-50%);
  background:#03101d;
  padding:20px;
  border:2px solid #0ff;
  border-radius:10px;
  display:none;
  z-index:99999;
  width:300px;
}

#nameInput {
  width:100%;
  padding:10px;
}

#nameSave {
  width:100%;
  background:#00c8ff;
  padding:10px;
  border:none;
  cursor:pointer;
  font-weight:bold;
}
</style>

<!-- CHAT BUTTON -->
<button id="chatBtn">üí¨</button>

<!-- CHAT PANEL -->
<div id="chatBox">
  <div id="chatMessages"></div>
  <input id="chatInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." />
  <button id="sendBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</div>

<!-- NAME SET WINDOW -->
<div id="nameBox">
  <h3 style="color:white;text-align:center;">–í–≤–µ–¥–∏—Ç–µ –∏–º—è</h3>
  <input id="nameInput" placeholder="–í–∞—à –Ω–∏–∫...">
  <button id="nameSave">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</div>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
// === Firebase init ===
const firebaseConfig = {
  apiKey: "AIzaSyA7s7uaRagUoqZOr9Z3HH5XfdIGODVk5Dk",
  authDomain: "growandsell1.firebaseapp.com",
  databaseURL: "https://growandsell1-default-rtdb.firebaseio.com",
  projectId: "growandsell1",
  storageBucket: "growandsell1.firebasestorage.app",
  messagingSenderId: "806898722982",
  appId: "1:806898722982:web:793a702f8ef3fae7adac67"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let username = localStorage.getItem("username");

// --- UI ---
const chatBtn = document.getElementById("chatBtn");
const chatBox = document.getElementById("chatBox");
const chatMessages = document.getElementById("chatMessages");
const chatInput = document.getElementById("chatInput");
const sendBtn = document.getElementById("sendBtn");

const nameBox = document.getElementById("nameBox");
const nameInput = document.getElementById("nameInput");
const nameSave = document.getElementById("nameSave");

// === If no username ‚Üí ask for it ===
if (!username) nameBox.style.display = "block";

nameSave.onclick = () => {
  let n = nameInput.value.trim();
  if (n.length < 2) return alert("–ò–º—è —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ!");
  username = n;
  localStorage.setItem("username", username);
  nameBox.style.display = "none";
};

// === Open/close chat ===
chatBtn.onclick = () => {
  chatBox.style.display = chatBox.style.display === "flex" ? "none" : "flex";
};

// === Anti-mat filter ===
function filterBadWords(text) {
  let bad = ["—Ö—É–π","—Å—É–∫–∞","–ø–∏–¥–æ—Ä","–±–ª—è","fuck","shit","–ø–æ—à–µ–ª","–∫–æ—Ç–∞–∫–±–∞—Å","–µ–±–ª–∞–Ω","–¥–æ–ª–±–∞–µ–±","–¥–µ–±–∏–ª","—Ç—É–ø–æ–π",];
  bad.forEach(w => {
    let reg = new RegExp(w,"gi");
    text = text.replace(reg, "***");
  });
  return text;
}

// === Send message ===
sendBtn.onclick = () => {
  let msg = chatInput.value.trim();
  if (!msg) return;

  msg = filterBadWords(msg);

  db.ref("globalChat").push({
    user: username,
    text: msg,
    time: Date.now()
  });

  chatInput.value = "";
};

// === Live chat messages ===
db.ref("globalChat").on("child_added", snap => {
  const m = snap.val();

  let div = document.createElement("div");
  div.classList.add("msg");

  if (m.user === username) div.classList.add("me");
  else div.classList.add("other");

  div.innerHTML = `<b>${m.user}:</b> ${m.text}`;

  chatMessages.appendChild(div);
  chatMessages.scrollTop = chatMessages.scrollHeight;
});
</script>


<div id="recordsScreen" style="display:none; padding: 20px;">
  <h2>üèÜ –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤</h2>
  <p>üîù –õ—É—á—à–∞—è —Å—É–º–º–∞ —à–∞–∫–∏–ª–µ–π: <span id="bestMoneyDisplay">0</span> üí∞</p>
  <button onclick="hideRecords()">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
</div>

<p id="recordUpdateTimer" style="font-size: 12px; color: gray; margin-top: 10px;">
  V134 <span id="updateTime"></span>
</p>
<div id="adminPanel" style="
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:999999;
">
  <div style="background:#111;padding:20px;border-radius:15px;color:white;width:300px">

    <h3>üõ† –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h3>

    <input id="adminTargetId" placeholder="ID –∏–≥—Ä–æ–∫–∞" style="width:100%">
    <br><br>
    <input id="adminAmount" placeholder="–°–∫–æ–ª—å–∫–æ —à–∞–∫–∏–ª–µ–π" style="width:100%">
    <br><br>

    <button onclick="adminGiveMoney()">üí∞ –í—ã–¥–∞—Ç—å</button>
    <br><br>
    <button onclick="closeAdmin()">‚ùå –ó–∞–∫—Ä—ã—Ç—å</button>

  </div>
</div>


  <script>
    let money = parseInt(localStorage.getItem("money")) || 20;
let slots = parseInt(localStorage.getItem("slots")) || 3;
let watering = parseInt(localStorage.getItem("watering")) || 0;
let garden = JSON.parse(localStorage.getItem("garden")) || [];
let displayedMoney = money;
let bestMoney = parseInt(localStorage.getItem("bestMoney")) || 0;
let rouletteSpinsToday =
  parseInt(localStorage.getItem("rouletteSpinsToday")) || 0;
let lastRouletteDate = localStorage.getItem("lastRouletteDate") || "";
let currentPlotSkin = localStorage.getItem("currentPlotSkin") || "default";
let stats = { planted: 0, harvested: 0, earned: 0 };


function updateStatsUI() {
  document.getElementById("statsPlanted").textContent = stats.planted;
  document.getElementById("statsHarvested").textContent = stats.harvested;
  document.getElementById("statsEarned").textContent = stats.earned;
}

function setSkin(skin) {
  currentPlotSkin = skin;
  localStorage.setItem("currentPlotSkin", currentPlotSkin);
  updateUI();
}


const music = document.getElementById("backgroundMusic");

// –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É
music.play();

// –ü–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø–∞—É–∑—É
music.pause();

const maxSlots = 505; // –º–∞–∫—Å–∏–º—É–º —Å–ª–æ—Ç–æ–≤

const seeds = [
  { name: "–õ—É–∫", emoji: "üßÖ", price: 2, growTime: 3000, rarity: "—Å—Ç–∞—Ä—Ç–æ–≤–æ–µ",  },
  { name: "–ú–æ—Ä–∫–æ–≤—å", emoji: "ü•ï", price: 6, growTime: 6000, rarity: "—Ä–µ–¥–∫–æ–µ", favorite: false
 },

  {
    name: "–¢–æ–∫—Å–∏—á–Ω—ã–π –ª–∏–º–æ–Ω",
    emoji: "‚ò£Ô∏è",
    price: 8,
    growTime: 6000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },

  {
    name: "–°–∞—Ö–∞—Ä–Ω–∞—è —Å–≤–µ–∫–ª–∞",
    emoji: "üç≠üç†",
    price: 10,
    growTime: 8000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ñ–µ–ª–µ–π–Ω—ã–π –∞—Ä–±—É–∑",
    emoji: "üçâüß°",
    price: 15,
    growTime: 10000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },

  {
    name: "–ü–∞–ø—Ä–∏–∫–∞-–ø—É—à–∫–∞",
    emoji: "üå∂Ô∏èüí•",
    price: 19,
    growTime: 11000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ö–ª—É–±–Ω–∏–∫–∞ —Å –Ω–µ–±–∞",
    emoji: "üçì‚òÅÔ∏è",
    price: 23,
    growTime: 12000,
    rarity: "—Ä–µ–¥–∫–æ–µ",
    favorite: false

  },


  {
    name: "–ó–≤—ë–∑–¥–Ω—ã–π –ø–æ–º–∏–¥–æ—Ä",
    emoji: "üçÖüå†",
    price: 30,
    growTime: 13500,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },

  {
    name: "–ó–æ–ª–æ—Ç–æ–π –±–∞–Ω–∞–Ω",
    emoji: "üçå‚ú®",
    price: 35,
    growTime: 14500,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },

  {
    name: "–í—É–ª–∫–∞–Ω–∏—á–µ—Å–∫–∞—è –≥—Ä—É—à–∞",
    emoji: "üçêüåã",
    price: 40,
    growTime: 15500,
    rarity: "—ç–ø–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },

  {
    name: "–ù–µ–æ–Ω–æ–≤—ã–π –∞–ø–µ–ª—å—Å–∏–Ω",
    emoji: "üçäüí°",
    price: 50,
    growTime: 17000,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },

  {
    name: "–°–æ–ª–Ω–µ—á–Ω—ã–π –∫–æ–∫–æ—Å",
    emoji: "ü••‚òÄÔ∏è",
    price: 55,
    growTime: 18000,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },


  {
    name: "–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞",
    emoji: "ü•¨üåå",
    price: 65,
    growTime: 19500,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },

  {
    name: "–ì—Ä–æ–∑–æ–≤–æ–π –º–∞–Ω–¥–∞—Ä–∏–Ω",
    emoji: "üçäüå©Ô∏è",
    price: 70,
    growTime: 20500,
    rarity: "–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ",
    favorite: false

  },


  {
    name: "–ú–∞–≥–Ω–∏—Ç–Ω–∞—è –º–æ—Ä–∫–æ–≤–∫–∞",
    emoji: "ü•ïüß≤",
    price: 550,
    growTime: 23000,
    rarity: "–º–∏—Ñ–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–ü–ª–æ–¥ –ø–æ—Ä—Ç–∞–ª–∞",
    emoji: "üåÄüçí",
    price: 850,
    growTime: 24000,
    rarity: "–º–∏—Ñ–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–†–∞—Å—Ç–µ–Ω–∏–µ –≤–µ—á–Ω–æ—Å—Ç–∏",
    emoji: "‚ôæÔ∏èüåø",
    price: 999,
    growTime: 25000,
    rarity: "–º–∏—Ñ–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
 
  {
    name: "–ì–æ—Ä—è—â–∞—è –≥–æ–ª—É–±–∏–∫–∞",
    emoji: "üî•ü´ê",
    price: 1500,
    growTime: 50000,
    rarity: "–º–∏—Ñ–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },
  {
    name: "–°–ª–µ–ø–∞—è –º–∞—Ä–∞–∫—É–π—è",
    emoji: "ü•≠üëì",
    price: 2222,
    growTime: 70000,
    rarity: "–º–∏—Ñ–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },

  {
    name: "–ù–µ–æ–Ω–æ–≤—ã–π –±–∞–Ω–∞–Ω",
    emoji: "üååüçå",
    price: 1000000,
    growTime: 10000000,
    rarity: "–ø—Ä–∏–∑–º–∞—Ç–∏—á–µ–∫–æ–µ",
    favorite: false

  },
    {
    name: "–ê—Å—Ç—Ä–∞–ª—å–Ω—ã–π –ª–æ—Ç–æ—Å",
    emoji: "üå†ü™∑",
    price:  100000000,
    growTime: 10000000,
    rarity: "–ø—Ä–∏–∑–º–∞—Ç–∏—á–µ—Å–∫–æ–µ",
    favorite: false

  },

{ 
  name: "–ú–µ–¥–æ–≤—ã–π –∫–∞–∫—Ç—É—Å", 
  emoji: "üçØüåµ", 
  price: 900000000, 
  growTime: 80000000,  // 60 —Å–µ–∫—É–Ω–¥
  rarity: "–ø—Ä–∏–∑–º–∞—Ç–∏—á–µ—Å–∫–æ–µ" 
},
  {
    name: "–°–≤–µ—Ä—Ö–Ω–æ–≤–∞",
    emoji: "üéáüåå",
    price: 1000000000,
    growTime: 1000000000,
    rarity: "–ø—Ä–∏–∑–º–∞—Ç–∏—á–µ–∫–æ–µ",
    favorite: false

  },
    {
    name: "–°—Ñ–µ—Ä–∞ —Ö–∞–æ—Å–∞",
    emoji: "üåÄ",
    price: 500000000000,
    growTime: 100000000000,
    rarity: "—Ç—Ä–∞–Ω—Å—Ü–µ–Ω–¥–µ–Ω—Ç–Ω–æ–µ",
    favorite: false

  },
];

const rarityOrder = {
  –æ–±—ã—á–Ω–æ–µ: 1,
  —Ä–µ–¥–∫–æ–µ: 2,
  —ç–ø–∏—á–µ—Å–∫–æ–µ: 3,
  –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ: 4,
  –º–∏—Ñ–∏—á–µ—Å–∫–æ–µ: 5,
};

// –°–ø–∏—Å–æ–∫ –∫–æ–¥–æ–≤
const redeemCodes = {
    // –∫–æ–¥ -> –Ω–∞–≥—Ä–∞–¥–∞
};

let usedCodes = []; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–¥—ã

function redeemCode() {
  const input = document.getElementById("redeemInput").value.trim().toUpperCase();
  const message = document.getElementById("redeemMessage");

  if (!input) {
    message.textContent = "‚ùå –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥!";
    return;
  }

  if (usedCodes.includes(input)) {
    message.textContent = "‚ö†Ô∏è –≠—Ç–æ—Ç –∫–æ–¥ —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!";
    return;
  }

  if (redeemCodes[input]) {
    money += redeemCodes[input];
    usedCodes.push(input);
    message.textContent = `‚úÖ –ö–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –í—ã –ø–æ–ª—É—á–∏–ª–∏ ${redeemCodes[input]} üí∞`;
    updateMoney();
  } else {
    message.textContent = "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥!";
  }
}



seeds.sort((a, b) => rarityOrder[a.rarity] - rarityOrder[b.rarity]);

function save() {
  localStorage.setItem("money", money);
  localStorage.setItem("slots", slots);
  localStorage.setItem("watering", watering);
  localStorage.setItem("garden", JSON.stringify(garden));
  if (money > bestMoney) {
    bestMoney = money;
    localStorage.setItem("bestMoney", bestMoney);
  }
}

function updateUI() {
  document.getElementById("money").textContent = money;
  renderGarden();
}

function renderGarden() {
  const gardenDiv = document.getElementById("garden");
  gardenDiv.innerHTML = "";

  for (let i = 0; i < slots; i++) {
    const plot = document.createElement("div");
plot.className = "plot";
if (currentPlotSkin === "night") {
  plot.classList.add("night-skin");
}



    const plant = garden[i];
    if (plant) {
      plot.textContent = plant.emoji;
      if (!plant.ready) {
        plot.classList.add("growing");
      }
      if (plant.ready) {
        plot.innerHTML += `<div class="tooltip">–ì–æ—Ç–æ–≤–æ! (${plant.name})</div>`;
        plot.onclick = () => {
         money += Math.floor(plant.price * 1.5 * getRebirthBonus());
          garden[i] = null;
          updateUI();
          save();
        };
      } else {
        const percent = Math.floor(
          ((Date.now() - plant.start) / plant.time) * 100,
        );
        plot.innerHTML += `<div class="tooltip">${plant.rarity} ‚Ä¢ ${percent}%</div>`;
      }
    } else {
      plot.onclick = () => plantSeed(i);
    }

    gardenDiv.appendChild(plot);
  }
}

function renderSeeds() {
  const rarityOrder = {
    –æ–±—ã—á–Ω–æ–µ: 1,
    —Ä–µ–¥–∫–æ–µ: 2,
    —ç–ø–∏—á–µ—Å–∫–æ–µ: 3,
    –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ: 4,
    –º–∏—Ñ–∏—á–µ—Å–∫–æ–µ: 5,
  };

  seeds.sort((a, b) => rarityOrder[a.rarity] - rarityOrder[b.rarity]);

  const seedButtons = document.getElementById("seedButtons");
  seedButtons.innerHTML = "";
  seeds.forEach((seed, index) => {
    const btn = document.createElement("button");
    btn.textContent = `${seed.emoji} ${seed.name} (${seed.price}üí∞)`;
    btn.onclick = () => {
      selectedSeed = index;
      toggleShop();
    };
    seedButtons.appendChild(btn);
  });
}

let selectedSeed = null;

function plantSeed(i) {
  if (selectedSeed === null) return;
  const seed = seeds[selectedSeed];
  if (money < seed.price) return;

  money -= seed.price;
  const time = seed.growTime - watering * 1000;
  garden[i] = {
    ...seed,
    start: Date.now(),
    time: time,
    ready: false,
  };

  growPlant(i);
  updateUI();
  save();
  updateQuestProgress(0, 1); // –ü–æ—Å–∞–¥–∫–∞ —Ä–∞—Å—Ç–µ–Ω–∏—è
}

function growPlant(i) {
  const interval = setInterval(() => {
    const plant = garden[i];
    if (!plant) return clearInterval(interval);
    if (Date.now() - plant.start >= plant.time) {
    const timePassed = Date.now() - plant.start;
const growTime = boosts.speed ? plant.time * 0.5 : plant.time; // ‚ö° –£—Å–∫–æ—Ä–∏—Ç–µ–ª—å —Ä–æ—Å—Ç–∞
if (timePassed >= growTime) {
// üé® –£–ª—É—á—à–µ–Ω–Ω—ã–µ –º—É—Ç–∞—Ü–∏–∏
let roll = Math.random();
if (roll < 0.05) { // 5% —à–∞–Ω—Å –Ω–∞ –º—É—Ç–∞—Ü–∏—é
  let type;
  if (roll < 0.03) { // 3% –æ–±—ã—á–Ω—ã–µ —Ä–µ–¥–∫–∏–µ
    type = ["silver", "gold"][Math.floor(Math.random() * 2)];
  } else if (roll < 0.049) { // 1.9% —à–∞–Ω—Å –Ω–∞ —Ä–∞–¥—É–∂–Ω–æ–µ
    type = "rainbow";
  } else { // 0.1% —Å—É–ø–µ—Ä-—Ä–µ–¥–∫–æ–µ
    type = "cosmic";
  }

  if (type === "silver") {
    plant.price *= 2;
    plant.emoji = "ü•à" + plant.emoji;
    plant.mutation = "–°–µ—Ä–µ–±—Ä—è–Ω–æ–µ üåü (√ó2 –¥–µ–Ω—å–≥–∏)";
  }
  if (type === "gold") {
    plant.price *= 5;
    plant.emoji = "ü•á" + plant.emoji;
    plant.mutation = "–ó–æ–ª–æ—Ç–æ–µ üí∞ (√ó5 –¥–µ–Ω—å–≥–∏)";
  }
  if (type === "rainbow") {
    plant.price *= 10;
    plant.emoji = "üåà" + plant.emoji;
    plant.mutation = "–†–∞–¥—É–∂–Ω–æ–µ üåà (√ó10 –¥–µ–Ω—å–≥–∏ + +50% —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–æ—Å—Ç–∞)";
    plant.growTime = Math.floor(plant.growTime * 0.5); // –±—ã—Å—Ç—Ä–µ–µ —Ä–∞—Å—Ç—ë—Ç
  }
  if (type === "cosmic") {
    plant.price *= 50;
    plant.emoji = "‚ú®" + plant.emoji;
    plant.mutation = "–ö–æ—Å–º–∏—á–µ—Å–∫–æ–µ üöÄ (√ó50 –¥–µ–Ω—å–≥–∏ + –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç)";
    plant.ready = true; // —Å—Ä–∞–∑—É –≥–æ—Ç–æ–≤–æ
  }
}

  plant.ready = true;
  updateUI();
  save();
  clearInterval(interval);
}

    }
  }, 1000);
}

function buySlot() {
  if (slots >= maxSlots) {
    alert("–ú–∞–∫—Å–∏–º—É–º –≥—Ä—è–¥–æ–∫ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç! üåæ");
    return;
  }

  if (money >= 15) {
    money -= 15;
    slots += 1;
    garden.push(null);
    updateUI();
    save();
  } else {
    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —à–∞–∫–∏–ª–µ–π!");
  }
}

function buyWatering() {
  if (money >= 10) {
    money -= 10;
    watering += 1;
    updateUI();
    save();
  }
}

function loadGrowth() {
  garden.forEach((plant, i) => {
    if (plant && !plant.ready) {
      growPlant(i);
    }
  });
}




function animateMoney() {
  const display = document.getElementById("money");
  if (!display) return;

  if (displayedMoney !== money) {
    displayedMoney += (money - displayedMoney) * 0.1;
    if (Math.abs(money - displayedMoney) < 0.5) {
      displayedMoney = money;
    }
    display.textContent = Math.floor(displayedMoney);
  }

  requestAnimationFrame(animateMoney);
}

function harvestAll() {
  let harvested = false;
  for (let i = 0; i < garden.length; i++) {
    const plant = garden[i];
    if (plant && plant.ready) {
     money += Math.floor(plant.price * 1.5 * getRebirthBonus());

      garden[i] = null;
      harvested = true;
    }
  }
  if (harvested) {
    updateUI();
    save();
  } else {
    alert("–ù–µ—Ç –≥–æ—Ç–æ–≤—ã—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π! üå±");
  }
  updateQuestProgress(1, 1); // –°–±–æ—Ä —É—Ä–æ–∂–∞—è
  let earned = Math.floor(plant.price * 1.5); // —Å–∫–æ–ª—å–∫–æ –∑–∞—Ä–∞–±–æ—Ç–∞–ª –∑–∞ —Ä–∞—Å—Ç–µ–Ω–∏–µ
  money += earned; // –¥–æ–±–∞–≤–ª—è–µ–º –∫ –¥–µ–Ω—å–≥–∞–º
  updateQuestProgress(4, earned); // –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–≤–µ—Å—Ç–∞ –ø–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º –¥–µ–Ω—å–≥–∞–º
}

function toggleShop() {
  const shop = document.getElementById("plantShop");
  shop.classList.toggle("hidden");
}

function showRecords() {
  document.getElementById("game").style.display = "none";
  document.getElementById("recordsScreen").style.display = "block";
  document.getElementById("bestMoneyDisplay").textContent = bestMoney;
}

function hideRecords() {
  document.getElementById("recordsScreen").style.display = "none";
  document.getElementById("game").style.display = "block";
}

function startRecordUpdateTimer(seconds) {
  const timerDisplay = document.getElementById("updateTime");

  function update() {
    const min = Math.floor(seconds / 60)
      .toString()
      .padStart(2, "0");
    const sec = (seconds % 60).toString().padStart(2, "0");
    timerDisplay.textContent = `${min}:${sec}`;

    if (seconds <= 0) {
      clearInterval(timerInterval);
      timerDisplay.textContent = "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...";
      // –º–æ–∂–µ—à—å —Ç—É—Ç –≤—ã–∑–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–ª–∏ —Å–∫—Ä—ã—Ç—å
    }

    seconds--;
  }

  update();

  const timerInterval = setInterval(update, 1000);
}

function spinRoulette() {
  const today = new Date().toDateString();

  // –°–±—Ä–æ—Å –µ—Å–ª–∏ –Ω–æ–≤—ã–π –¥–µ–Ω—å
  if (lastRouletteDate !== today) {
    rouletteSpinsToday = 0;
    lastRouletteDate = today;
    localStorage.setItem("lastRouletteDate", today);
    localStorage.setItem("rouletteSpinsToday", rouletteSpinsToday);
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞
  if (rouletteSpinsToday >= 3) {
    alert("‚ùå –°–µ–≥–æ–¥–Ω—è –ª–∏–º–∏—Ç –ø—Ä–æ–∫—Ä—É—Ç–æ–∫ –∏—Å—á–µ—Ä–ø–∞–Ω (3/3). –ü–æ–ø—Ä–æ–±—É–π –∑–∞–≤—Ç—Ä–∞!");
    return;
  }

  if (money < 5_000) {
    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –®–∞–∫–∏–ª–µ–π!");
    return;
  }

  money -= 5_000;
  save();
  updateUI();

  const text = document.getElementById("rouletteText");
  text.textContent = "üé≤ –†—É–ª–µ—Ç–∫–∞ –∫—Ä—É—Ç–∏—Ç—Å—è...";
  text.classList.add("shake");

  const rewards = [
    { amount: 10_000, chance: 55 },
    { amount: 50_000, chance: 50 },
    { amount: 1_000_000, chance: 35 },
    { amount: 10_000_000, chance: 20 },
    { amount: 50_000_000, chance: 10 },
    { amount: 100_000_000, chance: 7 },
    { amount: 500_000_000, chance: 5 },
    { amount: 1_000_000_000, chance: 1 },
  ];

  setTimeout(() => {
    text.classList.remove("shake");

    let roll = Math.random() * 100;
    let sum = 0;
    let reward = 0;
    for (let r of rewards) {
      sum += r.chance;
      if (roll <= sum) {
        reward = r.amount;
        break;
      }
    }

    text.textContent = `üéâ –¢—ã –≤—ã–∏–≥—Ä–∞–ª ${reward.toLocaleString()} –®–∞–∫–∏–ª–µ–π!`;
    money += reward;
    save();
    updateUI();

    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
    rouletteSpinsToday++;
    localStorage.setItem("rouletteSpinsToday", rouletteSpinsToday);
  }, 2000);
}

let boosts = {
  speed: false,
  money: false,
  extraSpin: 0,
};

function buyBoost(type, duration, cost) {
  if (money >= cost) {
    money -= cost;
    activateBoost(type, duration);
    save();
    updateUI();
  } else {
    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –®–∞–∫–∏–ª–µ–π!");
  }
}

function activateBoost(type, duration) {
  if (type === "speed") {
    boosts.speed = true;
    setTimeout(() => (boosts.speed = false), duration);
    alert("‚ö° –£—Å–∫–æ—Ä–∏—Ç–µ–ª—å —Ä–æ—Å—Ç–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –Ω–∞ 10 –º–∏–Ω—É—Ç!");
  }
  if (type === "extraSpin") {
    boosts.extraSpin += 1;
    alert("üé≤ –í—ã –ø–æ–ª—É—á–∏–ª–∏ +1 –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Ä—É–ª–µ—Ç–∫–∏!");
  }
}


let rebirths = parseInt(localStorage.getItem("rebirths")) || 0;

function tryRebirth() {
  if (money >= 999_000_000_000) {
    if (confirm("‚ö° –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ! –í—Å—ë —Å–±—Ä–æ—Å–∏—Ç—Å—è, –Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∫–∏ —É–≤–µ–ª–∏—á–∞—Ç—Å—è.")) {
      rebirths++;
      localStorage.setItem("rebirths", rebirths);
      money = 20;
      slots = 3;
      garden = [];
      watering = 0;
      save();
      updateUI();
      alert("‚ú® –¢—ã —Å–¥–µ–ª–∞–ª –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ! –í—Å–µ–≥–æ: " + rebirths);
    }
  } else {
    alert("‚ùå –ù—É–∂–Ω–æ 999 –º–∏–ª–ª–∏–∞—Ä–¥–æ–≤ –¥–ª—è –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è!");
  }
}

// –±–æ–Ω—É—Å –¥–æ—Ö–æ–¥–∞ –ø—Ä–∏ —Å–±–æ—Ä–µ
function getRebirthBonus(multiplier = 1) {
  return 1 + rebirths * 0.1;
}









const bgMusic = document.getElementById("bg-music");

document.addEventListener("click", () => {
  if (bgMusic.paused) {
    bgMusic.play();
  }
});

const startScreen = document.getElementById("start-screen");
const gameContainer = document.getElementById("game-container");

startScreen.addEventListener("click", () => {
  startScreen.style.display = "none";
  gameContainer.style.filter = "blur(0)";
});


function openTab(tabName) {
  let tabs = document.getElementsByClassName("tab");
  for (let i = 0; i < tabs.length; i++) {
    tabs[i].style.display = "none";
  }
  document.getElementById(tabName + "Tab").style.display = "block";
}


function closeSkinsTab() {
  // —Å–∫—Ä—ã–≤–∞–µ–º –≤–∫–ª–∞–¥–∫—É —Å–∫–∏–Ω–æ–≤
  document.getElementById("skinsTab").style.display = "none";
  // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞–≥–∞–∑–∏–Ω
  openTab("shop");
}

let oilCoins = parseInt(localStorage.getItem("oilCoins")) || 50;

function saveOil() {
  localStorage.setItem("oilCoins", oilCoins);
  document.getElementById("oilCoins").textContent = oilCoins;
}

// + –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
saveOil();

// –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ + –Ω–µ—Ñ—Ç—å
setInterval(() => {
  oilCoins += Math.floor(Math.random() * 9 + 2); // 2‚Äì10 –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫
  saveOil();
}, 30000);


function toggleOilShop() {
  document.getElementById("oilShop").classList.toggle("hidden");
}

function buySmallOilPack() {
  if (oilCoins < 150) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ‚õΩ!");

  oilCoins -= 150;
  saveOil();

  let roll = Math.random();

  if (roll < 0.10) {
    giveOilPlant("üí† –ù–µ—Ñ—Ç—è–Ω–∞—è –æ—Ä—Ö–∏–¥–µ—è", "üå∫üõ¢Ô∏è", 100000000000, 100000000000, "–ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ");
    alert("üî• –í–∞–º –≤—ã–ø–∞–ª–æ –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ!");
  } else {
    let gain = Math.floor(Math.random() * 30 + 10);
    oilCoins += gain;
    saveOil();
    alert("üõ¢ –í—ã –Ω–∞—à–ª–∏ " + gain + " –Ω–µ—Ñ—Ç–∏ –≤ –ø–∞–∫–µ!");
  }
}
function buyBigOilPack() {
  if (oilCoins < 600) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ‚õΩ!");

  oilCoins -= 600;
  saveOil();

  const eventPlants = [
    {name:"–ß–µ—Ä–Ω–∞—è –ú—è—Ç–∞", emoji:"üåøüõ¢Ô∏è", price:2_500_000, growTime:50_000, rarity:"–∏–≤–µ–Ω—Ç–æ–≤–æ–µ"},
    {name:"–ù–µ—Ñ—Ç—è–Ω–∞—è –†–æ–∑–∞", emoji:"üåπüõ¢Ô∏è", price:3_500_000, growTime:70_000, rarity:"–∏–≤–µ–Ω—Ç–æ–≤–æ–µ"},
    {name:"–ë–µ–Ω–∑–∏–Ω–æ–≤–∞—è –Ø–≥–æ–¥–∞", emoji:"ü´êüî•", price:5_000_000, growTime:80_000, rarity:"–∏–≤–µ–Ω—Ç–æ–≤–æ–µ"},
    {name:"–ñ–∏–¥–∫–æ–µ –î–µ—Ä–µ–≤–æ", emoji:"üå≥üíß", price:8_000_000, growTime:110_000, rarity:"–∏–≤–µ–Ω—Ç–æ–≤–æ–µ"},
  ];

  let plant = eventPlants[Math.floor(Math.random() * eventPlants.length)];
  giveOilPlant(plant.name, plant.emoji, plant.price, plant.growTime, plant.rarity);

  alert("üéâ –í–∞–º –≤—ã–ø–∞–ª–æ —Ä–∞—Å—Ç–µ–Ω–∏–µ: " + plant.emoji + " " + plant.name);
}

function giveOilPlant(name, emoji, price, time, rarity) {
  let i = garden.findIndex(p => !p);
  if (i === -1) return alert("–ù–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã—Ö –≥—Ä—è–¥–æ–∫!");

  garden[i] = {
    name,
    emoji,
    price,
    growTime: time,
    start: Date.now(),
    time,
    rarity,
    ready: false
  };

  growPlant(i);
  updateUI();
  save();
}
function openDonate() {
  const modal = document.getElementById("donateModal");
  modal.style.display = "flex";
  document.getElementById("donatePlayerId").textContent = playerId;
}

function closeDonate() {
  document.getElementById("donateModal").style.display = "none";
}

function goToBot() {
  window.location.href = "https://t.me/growansellofficial_bot";
}

document.getElementById("donateModal").addEventListener("click", (e) => {
  if (e.target.id === "donateModal") {
    closeDonate();
  }
});
const ADMIN_CODE = "AUNXZZ-ADMIN-2026";

function openAdmin() {
  const code = prompt("–í–≤–µ–¥–∏—Ç–µ –∞–¥–º–∏–Ω-–∫–æ–¥:");
  if (code === ADMIN_CODE) {
    document.getElementById("adminPanel").style.display = "flex";
  } else {
    alert("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥");
  }
}

function closeAdmin() {
  document.getElementById("adminPanel").style.display = "none";
}


animateMoney();
renderSeeds();
updateUI();
loadGrowth();
function loadAdminMessage() {
  fetch("adminMessage.json")
    .then(response => response.json())
    .then(data => {
      if (data.message && data.message.trim() !== "") {
        const msgBox = document.createElement("div");
        msgBox.style.position = "fixed";
        msgBox.style.top = "10px";
        msgBox.style.left = "50%";
        msgBox.style.transform = "translateX(-50%)";
        msgBox.style.background = "rgba(255, 215, 0, 0.9)";
        msgBox.style.color = "#000";
        msgBox.style.padding = "10px 20px";
        msgBox.style.borderRadius = "10px";
        msgBox.style.fontWeight = "bold";
        msgBox.style.zIndex = "9999";
        msgBox.style.boxShadow = "0px 2px 10px rgba(0,0,0,0.3)";
        msgBox.style.animation = "slideDown 0.5s ease-out";
        msgBox.innerText = data.message;
        document.body.appendChild(msgBox);

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setTimeout(() => {
          msgBox.remove();
        }, 5000);
      }
    })
    .catch(err => console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–¥–º–∏–Ω-—Å–æ–æ–±—â–µ–Ω–∏—è", err));
}

// –ê–Ω–∏–º–∞—Ü–∏—è
const style = document.createElement("style");
style.innerHTML = `
@keyframes slideDown {
  from { transform: translate(-50%, -50px); opacity: 0; }
  to { transform: translate(-50%, 0); opacity: 1; }
}`;
document.head.appendChild(style);

loadAdminMessage();


  </script>
</body>
</html>
